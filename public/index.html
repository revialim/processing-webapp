<html>
<head>
    <title> Processing Web App </title>
    <script src="./processing.js"></script>
    <script>
        //cube initial setup
        window.CubeContainer = {
            boxX : 100,
            boxY : 100,
            cubeSize : 90,
            rotX : 0.5,
            rotY : 0.5
        }
        
    </script>
</head>
<body>
<h1> Processing Web App </h1>

<h2> Cube </h2>	
    
<canvas id="testcanvas"></canvas>
    
<script id="script1" type="text/javascript">
    // Attaching js code to the canvas by using a sketch object
    var sketch = new Processing.Sketch();
    
    // define 3D context
    sketch.use3DContext = true;
    // attach function (also, can be specified as the single parameter 
    // in the Processing.Sketch object constructor)
    sketch.attachFunction = function(processing) {
        
        processing.setup = function() {
            processing.size(200, 200, processing.P3D);
            processing.fill(8);
            processing.stroke(200);
            processing.strokeWeight(2);
        };

        processing.draw = function() {
            processing.background(240);
            //draw a 3d box
            processing.translate(CubeContainer.boxX, CubeContainer.boxY, 0); 
            processing.rotateY(CubeContainer.rotY);
            processing.rotateX(CubeContainer.rotX);
            processing.box(CubeContainer.cubeSize);
        };
        
        // mouse event
        
        processing.mouseDragged = function() {
            var rate = 0.01;
            CubeContainer.rotX += (processing.pmouseY-processing.mouseY) * rate;
            CubeContainer.rotY += (processing.mouseX-processing.pmouseX) * rate;
        };
        
    };
    
    function setValue(elem, i) {
        if(elem.id === "boxPosX") {
            CubeContainer.boxX = i;
        } else if(elem.id === "boxPosY") {
            CubeContainer.boxY = i;
        } else if (elem.id === "cubeSize") {
            CubeContainer.cubeSize = i;
        } else if (elem.id === "rotationX") {
            CubeContainer.rotX = i;
        } else if (elem.id === "rotationY") {
            CubeContainer.rotY = i;
        }
    }
    
    // attaching the sketchProc function to the canvas
    var canvas = document.getElementById("testcanvas");
    var p = new Processing(canvas, sketch);

</script>

    <div>x-coordinate:</div>
    <input type="range" id="boxPosX" min="0" max="200" oninput="setValue(this, this.value);" onchange="setValue(this, this.value);">
    <div>y-coordinate:</div>
    <input type="range" id="boxPosY" min="0" max="200" oninput="setValue(this, this.value);" onchange="setValue(this, this.value);">
    <div>cube size:</div>
    <input type="range" id="cubeSize" min="10" max="180" oninput="setValue(this, this.value);" onchange="setValue(this, this.value);">
    <div>rotation x:</div>
    <input type="range" id="rotationX" min="0" max="6.3" step="0.01" oninput="setValue(this, this.value);" onchange="setValue(this, this.value);">
    <div>rotation y: </div>
    <input type="range" id="rotationY" min="0" max="6.3" step="0.01" oninput="setValue(this, this.value);" onchange="setValue(this, this.value);">
    
 
</body>
</html>